<% layout('layouts/boilerplate') %>

<div class="container my-4">
  <!-- Header -->
  <div class="d-flex align-items-center gap-2 mb-3">
    <span class="text-primary" aria-hidden="true">ðŸ‘¤</span>
    <h3 class="h5 fw-semibold mb-0 text-body">Profile Information</h3>
  </div>

  <!-- Form -->
  <form id="editProfileForm" action="/users/<%= currUser._id %>?_method=PUT" method="post" class="bg-white border rounded-3 p-4 shadow-sm" enctype="multipart/form-data">
    <!-- Two column inputs -->
    <div class="row g-3">
      <div class="col-12 col-lg-6">
        <label class="form-label small fw-medium">Full Name</label>
        <input
          type="text"
          name="user[name]"
          value="<%= user.name %>"
          placeholder="Enter your full name"
          required
          class="form-control"
        />
      </div>

      <div class="col-12 col-lg-6">
        <label class="form-label small fw-medium">Username</label>
        <input
          type="text"
          name="user[username]"
          value="<%= user.username %>"
          placeholder="Choose a unique username"
          required
          class="form-control"
        />
        <div class="form-text">This will be the public handle</div>
      </div>

      <div class="col-12 col-lg-6">
        <label class="form-label small fw-medium">Email Address</label>
        <input
          type="email"
          name="user[email]"
          value="<%= user.email %>"
          placeholder="your@email.com"
          required
          class="form-control"
        />
      </div>

      <div class="col-12 col-lg-6">
        <label class="form-label small fw-medium">Location</label>
        <input
          type="text"
          name=""
          value=""
          placeholder="City, Country"
          class="form-control"
        />
      </div>
    </div>

    <!-- Bio -->
    <div class="mt-4">
      <label class="form-label small fw-medium">Bio</label>
      <input
        type="text"
        name="user[bio]"
        value="<%= user.bio %>"
        placeholder="Tell us about yourself..."
        class="form-control"
      />
      <div class="form-text">Brief description for the profile</div>
    </div>

     <!-- Avatar -->
    <div class="mt-4">
            <p>Original Avatar</p>
            <img src="<%= originalAvatarUrl %>" alt="" style="height: 200px; width: 300px;" > <br>
            <label class="form-label small fw-medium mt-2">Avatar</label>
            <input
                type="file"
                name="user[avatar]"
                class="form-control"
                accept="image/*"
            />
        
    </div>

    <!-- Social Links -->
    <div class="mt-4">
      <h4 class="h6 fw-semibold text-body">Social Media Links</h4>
      <div class="row g-3">
        <div class="col-12 col-lg-6">
          <label class="form-label small fw-medium">Twitter</label>
          <input
            type="url"
            name="socialLinks[twitter]"
            value="<%= user.socialLinks.twitter %>"
            placeholder="https://twitter.com/username"
            class="form-control"
          />
        </div>

        <div class="col-12 col-lg-6">
          <label class="form-label small fw-medium">LinkedIn</label>
          <input
            type="url"
            name="socialLinks[linkedin]"
            value="<%= user.socialLinks.linkedin %>"
            placeholder="https://linkedin.com/in/username"
            class="form-control"
          />
        </div>

        <div class="col-12 col-lg-6">
          <label class="form-label small fw-medium">GitHub</label>
          <input
            type="url"
            name="socialLinks[github]"
            value="<%= user.socialLinks.github %>"
            placeholder="https://github.com/username"
            class="form-control"
          />
        </div>

        <div class="col-12 col-lg-6">
          <label class="form-label small fw-medium">Instagram</label>
          <input
            type="url"
            name="socialLinks[instagram]"
            value="<%= user.socialLinks.instagram %>"
            placeholder="https://instagram.com/username"
            class="form-control"
          />
        </div>
      </div>
    </div>

   
    <!-- Save Button -->
    <div class="d-flex justify-content-end pt-4 mt-4 border-top">
      <button id="saveBtn" type="submit" class="btn btn-primary px-4">
        Save Changes
      </button>
    </div>
  </form>
</div>


<script>
  (function () {
    const form = document.getElementById('editProfileForm');
    const saveBtn = document.getElementById('saveBtn');
    if (!form || !saveBtn) return;

    form.addEventListener('submit', function () {
      // mimic isLoading
      saveBtn.disabled = true;
      saveBtn.innerHTML = '<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>Saving...';
    });
  })();
</script>